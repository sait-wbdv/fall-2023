---
title: Server Side Code, Es Modules
excerpt:
status: announced
---

<script>
	import Homework from "$lib/components/Homework.svelte";
	import LessonPlan from "$lib/components/LessonPlan.svelte";
	import Achievement from "$lib/components/Achievement.svelte";
</script>

<Homework {status}>

## Prep

- Read [Server Only Modules](https://kit.svelte.dev/docs/server-only-modules)
- Read [Server Side Scripting](https://en.wikipedia.org/wiki/Server-side_scripting)
- Read [SveltKit: The best of Two Worlds](https://www.aplyca.com/en/blog/sveltekit-blurring-the-line-between-backend-and-frontend#heading-3)
- Watch [Node.js Crash Course Express Apps](https://www.youtube.com/watch?v=Lr9WUkeYSA8)

</Homework>

<LessonPlan {status}>

<h2>Assignment 3: Multi Page Website (Pair Project)</h2>

- [Link to Assignment](/courses/cpnt-262/assessments/assignment-3)
- Create a full featured multipage website.
- Your site will have a gallery and use a third party api of your choice

---

<h2 id="es-modules"> ES modules</h2>

### Materials

- Javascript.info: [ES Modules: An introduction](https://javascript.info/modules-intro)

**Why bother with modules?**

- Modules can contain private variables, functions, credentials, etc;
- Code can me moved out of our projects to clean up our files;
- Move data to an external that can be shared by multiple pages.

### Key Takeaways

- `data.js` needs to export variables using the `export` keyword:
  ```js
  // /src/lib/data.js
  export const fullName = "Ryan Reynolds";
  ```
  - Any variables without the `export` keyword are private and are not available outside the file.
- The imported data is wrapped in an object, so `+page.svelte` (for example) needs to wrap the imported variable in `{}` (called [destructuring](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)).
  ```html
  <!-- /routes/.../+page.svelte -->
  <script>
    import {fullName} from "$lib/data.js";
  </script>
  ```
- In this example, the imported variable name must match the exported variable name.

<h2 id="route-params"> 2. Route parameters</h2>

**Routing Tutorial**

- Review: [Pages](https://learn.svelte.dev/tutorial/pages)
- Review: [Layouts](https://learn.svelte.dev/tutorial/layouts)
- [Route parameters](https://learn.svelte.dev/tutorial/params)

Slides: [Dynamic Routes](https://sait-wbdv.github.io/slides/w23/cpnt-262/sveltekit-introduction.html#/13)

### Key Takeaways

- Route params are variables we import from the URL with `[]`;

  ```
  /players/[id]/+page.svelte
  ```

      - This creates an `id` variable that stores the URL segment as it's value

  ```

  ```

- Params can be accessed from the special SvelteKit `$page` object; - Because this is a Svelte store, you must use the `$` when accessing it.
- We use params to look up an items data in a database (in our case, an array of objects)

### Demo: Displaying RPG Players

- [`player` route](https://github.com/sait-wbdv/w23-refactor-example/tree/main/src/routes/dailies/2023-03-22-route-params/players) - [Live Demo](https://w23-sveltekit-examples.vercel.app/dailies/2023-03-22-route-params/players)
- [Example `fruit` and `color` routes](https://github.com/sait-wbdv/w23-refactor-example/tree/main/src/routes/dailies/2023-03-22-route-params/route-param-example)
  - [Live Demo](https://w23-sveltekit-examples.vercel.app/dailies/2023-03-22-route-params/route-param-example)

**Goals**

- Add an item route to `players` with route parameters:

  ```
  GET /players/:id
  ```

**Source code**

- [Finished dynamic route](https://github.com/sait-wbdv/w23-refactor-example/tree/main/src/routes/dailies/2023-03-22-route-params)
  - [Live Demo](https://w23-sveltekit-examples.vercel.app/dailies/2023-03-22-route-params/players)

---

<h2>Node Express (a very abbreviated intro)</h2>

- Express puts the E in **MERN**, **MEVN**, and **MEAN** stacks (react, vue, and angular respectively)
- It is a server micro library
- Modern frameworks like Sveltekit, NextJS, and NuxtJS support server side routes
- However you may work on projects that have a separate backend (or you might just really like backend development)
- A standalone backend will give you more control over ports and how everything works, but it's much more challenging to configure and get working

### Hello Express Tutorial

- This will show you the basics of creating a server with endpoints. You would use this to create a standalone backend
- [Hello World Example](https://expressjs.com/en/starter/hello-world.html)

---

<h2 id="scrum-meeting">Scrum Session</h2>

- what have you been working on?
- what do you plan to be doing?
- do you have any blocks?

</LessonPlan>

<Achievement {status}>

### Refactor your team's code to use form actions

- [Follow this documentation](https://kit.svelte.dev/docs/form-actions)
- Set up each function to use form actions as per the docs
- Each person should work on their function from before
- Merge everything into main and verify that it works before end of day

</Achievement>
